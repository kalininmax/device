const overlayModal=document.querySelector(".modal-overlay"),mapLink=document.querySelector(".contacts-map-link"),mapModal=document.querySelector(".modal-map"),feedbackLink=document.querySelector(".feedback-link"),feedbackModal=document.querySelector(".modal-feedback"),feedbackForm=feedbackModal.querySelector(".feedback-form"),feedbackName=feedbackModal.querySelector("#feedback-name"),feedbackEmail=feedbackModal.querySelector("#feedback-email"),feedbackMessage=feedbackModal.querySelector("#feedback-message"),feedbackSubmitButton=feedbackModal.querySelector(".button-submit"),promoSlide=document.querySelectorAll(".promo-slider-item"),promoSliderButton=document.querySelectorAll(".promo-slider-controls-button"),servicesSlide=document.querySelectorAll(".services-slider-item"),servicesSliderButton=document.querySelectorAll(".services-controls-button");let isStorageSupport=!0,storage={};try{storage.name=localStorage.getItem("name"),storage.email=localStorage.getItem("email"),storage.message=localStorage.getItem("message")}catch(a){isStorageSupport=!1}feedbackForm.addEventListener("submit",function(a){feedbackName.value&&feedbackEmail.value&&feedbackMessage.value?isStorageSupport&&(localStorage.setItem("name",feedbackName.value),localStorage.setItem("email",feedbackEmail.value),localStorage.setItem("message",feedbackMessage.value)):(a.preventDefault(),feedbackModal.classList.remove("modal-error"),feedbackModal.offsetWidth=feedbackModal.offsetWidth,feedbackModal.classList.add("modal-error"))}),mapLink.addEventListener("click",function(a){a.preventDefault(),overlayModal.classList.add("modal-overlay-show"),mapModal.classList.add("modal-show")}),feedbackLink.addEventListener("click",function(a){a.preventDefault(),overlayModal.classList.add("modal-overlay-show"),feedbackModal.classList.add("modal-show"),null===storage.name?feedbackName.focus():(feedbackName.value=storage.name,feedbackEmail.value=storage.email,feedbackMessage.value=storage.message,feedbackSubmitButton.focus())});function removeModal(a,b){b.preventDefault(),overlayModal.classList.remove("modal-overlay-show"),a.classList.remove("modal-show"),a.classList.remove("modal-error")}function modalClose(a){a.querySelector(".modal-close").addEventListener("click",function(b){removeModal(a,b)}),window.addEventListener("keydown",function(b){"Escape"===b.key&&a.classList.contains("modal-show")&&removeModal(a,b)}),overlayModal.addEventListener("click",function(b){removeModal(a,b)})}function slider(a,b){b.forEach(function(c,d){c.addEventListener("click",function(e){e.preventDefault(),c.classList.add("current"),a[d].classList.add("slider-item-show");for(let c=0;c<b.length;c++)c!==d&&(a[c].classList.remove("slider-item-show"),b[c].classList.remove("current"))})})}function focusInsideModal(a){let b=a.querySelectorAll("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex=\"0\"], [contenteditable]");b=Array.prototype.slice.call(b);let c=b[0],d=b[b.length-1];c.focus(),a.addEventListener("keydown",function(a){"Tab"===a.key&&("Shift"===a.key?document.activeElement===c&&(a.preventDefault(),d.focus()):document.activeElement===d&&(a.preventDefault(),c.focus()))})}focusInsideModal(mapModal),focusInsideModal(feedbackModal),modalClose(feedbackModal),modalClose(mapModal),slider(promoSlide,promoSliderButton),slider(servicesSlide,servicesSliderButton);